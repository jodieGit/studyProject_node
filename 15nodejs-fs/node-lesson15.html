<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node.js文件系统</title>
    <link rel="stylesheet" href="http://www.runoob.com/wp-content/themes/runoob/style.css?v=1.02" type="text/css"
          media="all">
</head>
<body>
<p>Node.js提供一组类似UNIX(POSIX)标准的文件操作API,Node导入文件系统模块（fs）语法如下：var fs = require("fs")</p>
<br/>

<p>1.异步和同步：fs.readFile() 异步 fs.readFileSync() 同步</p>
<br/>

<p>异步模式下打开文件的语法格式：fs.open(path, flags[, mode], callback)</p>

<p>打开文件参数名称：</p>
<ul>
    <li>path: 文件的路径</li>
    <li>flags: 文件打开的行为，具体值详见下文</li>
    <li>mode: 设置文件模式(权限)，文件创建默认为0666（可读可写）</li>
</ul>
<table class="reference">
    <tbody>
    <tr>
        <th>Flag</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>r</td>
        <td>以读取模式打开文件。如果文件不存在抛出异常。</td>
    </tr>
    <tr>
        <td>r+</td>
        <td> 以读写模式打开文件。如果文件不存在抛出异常。</td>
    </tr>
    <tr>
        <td>rs</td>
        <td>以同步的方式读取文件。</td>
    </tr>
    <tr>
        <td>rs+</td>
        <td>以同步的方式读取和写入文件。</td>
    </tr>
    <tr>
        <td>w</td>
        <td>以写入模式打开文件，如果文件不存在则创建。</td>
    </tr>
    <tr>
        <td>wx</td>
        <td>类似 'w'，但是如果文件路径存在，则文件写入失败。</td>
    </tr>
    <tr>
        <td>w+</td>
        <td>以读写模式打开文件，如果文件不存在则创建。</td>
    </tr>
    <tr>
        <td>wx+</td>
        <td>类似 'w+'， 但是如果文件路径存在，则文件读写失败。</td>
    </tr>
    <tr>
        <td>a</td>
        <td>以追加模式打开文件，如果文件不存在则创建。</td>
    </tr>
    <tr>
        <td>ax</td>
        <td>类似 'a'， 但是如果文件路径存在，则文件追加失败。</td>
    </tr>
    <tr>
        <td>a+</td>
        <td>以读取追加模式打开文件，如果文件不存在则创建。</td>
    </tr>
    <tr>
        <td>ax+</td>
        <td>类似 'a+'， 但是如果文件路径存在，则文件读取追加失败。</td>
    </tr>
    </tbody>
</table>
<br/>

<p>2.获取文件信息：fs.start(path, callback)</p>

<p>参数使用说明如下：</p>
<ul>
    <li>path: 文件路径</li>
    <li>callback: 回调函数，带有两个参数：（err, stats）,stats是fs.Stats对象</li>
</ul>
<table class="reference">
    <tbody>
    <tr>
        <th>方法</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>stats.isFile()</td>
        <td>如果是文件返回 true，否则返回 false。</td>
    </tr>
    <tr>
        <td>stats.isDirectory()</td>
        <td>如果是目录返回 true，否则返回 false。</td>
    </tr>
    <tr>
        <td>stats.isBlockDevice()</td>
        <td>如果是块设备返回 true，否则返回 false。</td>
    </tr>
    <tr>
        <td>stats.isCharacterDevice()</td>
        <td>如果是字符设备返回 true，否则返回 false。</td>
    </tr>
    <tr>
        <td>stats.isSymbolicLink()</td>
        <td>如果是软链接返回 true，否则返回 false。</td>
    </tr>
    <tr>
        <td>stats.isFIFO()</td>
        <td>如果是FIFO，返回true，否则返回 false。FIFO是UNIX中的一种特殊类型的命令管道。</td>
    </tr>
    <tr>
        <td>stats.isSocket()</td>
        <td>如果是 Socket 返回 true，否则返回 false。</td>
    </tr>
    </tbody>
</table>
<br/>
<p>3.异步模式下写入文件语法:fs.writeFile(filename, data [, options], callback)  如果该文件存在，该方法写入的内容会覆盖旧的文件内容。</p>
<p>参数使用说明：path: 文件路径； data: 要写入文件的数据，可以是String(字符串)或Buffer(流)对象； options: 该参数是一个对象{encoding, mode, flag}。默认编码是
utf8,模式为0666，flag为'w'; 回调函数只包含错误信息参数，在写入失败时返回</p>
<br/>
<p>4.异步模式下读取文件的语法模式：fs.read(fd, buffer, offset, length, position, callback)</p>
<p>参数说明：</p>
<ul>
    <li>fd: 通过fs.open()方法返回的文件描述符。</li>
    <li>buffer: 数据写入的缓存区</li>
    <li>offset: 缓冲区写入的写入偏移量</li>
    <li>length: 要从文件中读取的字节数</li>
    <li>position: 文件读取的起始位置，如果position的值为null,则会从当前文件指针的位置读取</li>
    <li>callback: 回调函数，有三个参数err, bytesRead, buffer, err为错误信息，bytesRead表示读取的字节数，buffer为缓冲区对象</li>
</ul>
<br/>
<p>5.异步模式下关闭文件：fs.close(fd, callback)</p>
<p>参数说明：fd  通过fs.open()方法返回的文件描述符   callback 回调函数，没有参数</p>
</body>
</html>